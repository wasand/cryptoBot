title: Crypto Bot
views:
  - title: Trendy i PnL
    path: pnl
    cards:
      - type: markdown
        title: PnL – ostatnie logi
        content: >
          {% set logs = state_attr('sensor.crypto_logs','items') %}
          {% if logs %}
          | Czas | Para | Poziom | Komunikat | PnL USD | PnL % |
          |---|---|---|---|---:|---:|
          {% for r in logs[:20] %}
          | {{ r.ts }} | {{ r.pair }} | {{ r.level }} | {{ r.message }} | {{ r.pnl_usd }} | {{ r.pnl_percent }} |
          {% endfor %}
          {% else %}
          Brak danych.
          {% endif %}
  - title: Alerty
    path: alerts
    cards:
      - type: markdown
        title: Ostatnie alerty (24h)
        content: >
          {% set alerts = state_attr('sensor.crypto_alerts','items') %}
          {% if alerts %}
          | Czas | Para | Typ | PnL USD | PnL % |
          |---|---|---|---:|---:|
          {% for a in alerts[:50] %}
          | {{ a.ts }} | {{ a.pair }} | {{ a.type }} | {{ a.pnl_usd }} | {{ a.pnl_percent }} |
          {% endfor %}
          {% else %}
          Brak alertów.
          {% endif %}
      - type: button
        name: Wyczyść alerty
        tap_action:
          action: call-service
          service: rest_command.clear_crypto_alerts
        icon: mdi:delete
